---
import { ArrowUpRight } from "lucide-react";
import type { iconCardProps } from "../types/card";
const {
  title,
  href,
  description,
  icon: Icon,
  target = "_self",
  className,
  disabled = false,
  ...rest
} = Astro.props as iconCardProps;

const Tag = href ? "a" : "button";
const elementProps = href ? { href, target } : { type: "button" as const };
---

<Tag
  {...elementProps}
  class:list={[
    "group relative flex flex-col p-6 h-56 rounded-3xl border backdrop-blur-md transition-all duration-500 ease-[cubic-bezier(0.23,1,0.32,1)] shadow-sm overflow-hidden text-left w-full",
    !disabled
      ? "border-muted-foreground/20 bg-card/60 hover:bg-card hover:border-primary-title/40 hover:shadow-2xl hover:shadow-primary-title/10 hover:-translate-y-1.5"
      : "border-border bg-muted/20 cursor-not-allowed pointer-events-none",
    className,
  ]}
  {...rest}
  {...disabled && { disabled: true, "aria-disabled": true }}
>
  {/* Coming Soon Badge */}
  {
    disabled && (
      <div class="absolute top-4 right-4">
        <span class="px-2.5 py-1 rounded-full bg-primary-title/10 text-[10px] font-black uppercase tracking-wider text-primary-title border border-primary-title/20 shadow-sm backdrop-blur-sm">
          Pr√≥ximamente
        </span>
      </div>
    )
  }

  {/* Background Accent Glow */}
  <div
    class:list={[
      "absolute -top-12 -left-12 w-24 h-24 rounded-full blur-2xl transition-colors duration-500",
      !disabled
        ? "bg-primary-title/10 group-hover:bg-primary-title/20"
        : "bg-muted/30",
    ]}
  >
  </div>

  <div class="relative flex flex-col h-full z-10">
    <div class="flex items-start justify-between mb-4">
      <div
        class:list={[
          "w-12 h-12 rounded-2xl flex items-center justify-center transition-all duration-500 shadow-sm",
          !disabled
            ? "bg-primary-title/10 text-primary-title group-hover:bg-primary-title group-hover:text-background"
            : "bg-muted text-muted-foreground/40",
        ]}
      >
        <Icon size={24} strokeWidth={2} />
      </div>
      {
        !disabled && (
          <div class="p-2 rounded-full text-muted-foreground/40 group-hover:text-primary-title group-hover:bg-primary-title/10 transition-all duration-300">
            <ArrowUpRight size={20} />
          </div>
        )
      }
    </div>

    <div class="space-y-2">
      <h3
        class:list={[
          "text-xl font-extrabold tracking-tight transition-colors duration-300",
          !disabled
            ? "text-foreground group-hover:text-primary-title"
            : "text-muted-foreground",
        ]}
      >
        {title}
      </h3>
      <p
        class:list={[
          "text-sm line-clamp-2 leading-relaxed transition-opacity duration-300",
          !disabled
            ? "text-muted-foreground opacity-80 group-hover:opacity-100"
            : "text-muted-foreground/50 italic",
        ]}
      >
        {description}
      </p>
    </div>

    <div
      class:list={[
        "mt-auto pt-2 flex items-center gap-2 text-[10px] font-black tracking-[0.2em] uppercase transition-colors duration-300",
        !disabled
          ? "text-muted-foreground/60 group-hover:text-primary-title"
          : "text-muted-foreground/30",
      ]}
    >
      <span
        class:list={[
          "w-4 h-[1px] transition-colors duration-300",
          !disabled
            ? "bg-muted-foreground/30 group-hover:bg-primary-title"
            : "bg-muted-foreground/10",
        ]}></span>
      {disabled ? "No disponible" : "Explorar"}
    </div>
  </div>

  {/* Decorative Background Icon */}
  <div
    class:list={[
      "absolute -bottom-8 -right-8 transition-all duration-700 transform pointer-events-none",
      !disabled
        ? "text-foreground/[0.03] group-hover:text-primary-title/[0.08] group-hover:scale-110 group-hover:-rotate-12"
        : "text-muted-foreground/5 scale-90 opacity-40",
    ]}
  >
    <Icon size={180} strokeWidth={1} />
  </div>
</Tag>
