---
import LogoImage from "@/assets/LogoImage.astro";
import Iglesia2025 from "@/images/iglesia/celebracion_10.webp";
import MenuReact from "../react/Menu";

const { userInfo, isLoggedIn } = Astro.locals;

// Logic for profile initials reproduced from ProfileMenu for consistent passing
const getInitials = (
  name: string | null | undefined,
  email: string | null | undefined,
) => {
  if (name) {
    return name
      .split(" ")
      .map((n) => n[0])
      .join("")
      .toUpperCase()
      .slice(0, 2);
  }
  return (email ?? "RE").slice(0, 2).toUpperCase();
};

const slugProfile = isLoggedIn
  ? getInitials(userInfo?.userName, userInfo?.userEmail)
  : "";
---

<MenuReact
  client:visible
  isLoggedIn={isLoggedIn}
  userInfo={userInfo ?? null}
  slugProfile={slugProfile}
  bgImageSrc={Iglesia2025.src}
>
  <LogoImage slot="logoSvg" />
</MenuReact>
