---
import { ArrowUpRight } from "lucide-react";

interface Props {
  label: string;
  description: string;
  icon?: any;
  action?: string;
  url?: string;
  variant?: "primary" | "amber" | "neutral";
  class?: string;
}

const {
  label,
  description,
  icon: Icon,
  action,
  url,
  variant = "primary",
  class: className,
} = Astro.props;

const variants = {
  primary: {
    bg: "bg-primary-title/[0.04] border-primary-title/10 hover:bg-primary-title/[0.08] hover:border-primary-title/20",
    iconBg: "bg-primary-title/10 text-primary-title",
    label: "text-primary-title",
  },
  amber: {
    bg: "bg-amber-500/[0.04] border-amber-500/10 hover:bg-amber-500/[0.08] hover:border-amber-500/20",
    iconBg: "bg-amber-500/10 text-amber-600",
    label: "text-amber-600",
  },
  neutral: {
    bg: "bg-muted/30 border-border/60 hover:bg-muted/50 hover:border-border",
    iconBg: "bg-muted text-muted-foreground",
    label: "text-muted-foreground",
  },
};

const currentVariant = variants[variant];
const Element = url ? "a" : "div";
---

<Element
  href={url}
  target={url ? "_blank" : undefined}
  rel={url ? "noopener noreferrer" : undefined}
  class:list={[
    "group relative flex items-center gap-4 p-4 rounded-2xl border transition-all duration-500",
    currentVariant.bg,
    className,
  ]}
>
  <!-- Icon Container (Optional) -->
  {
    Icon && (
      <div
        class:list={[
          "flex h-11 w-11 shrink-0 items-center justify-center rounded-xl transition-all duration-500 shadow-sm group-hover:scale-110",
          currentVariant.iconBg,
        ]}
      >
        <Icon class="size-5" />
      </div>
    )
  }

  <!-- Content -->
  <div class="flex flex-1 flex-col text-start overflow-hidden">
    <span
      class:list={[
        "text-xs font-bold uppercase tracking-wide mb-0.5",
        currentVariant.label,
      ]}
    >
      {label}
    </span>
    <p
      class="text-sm font-semibold text-foreground leading-snug whitespace-pre-line text-pretty"
    >
      {description}
    </p>
  </div>

  <!-- Action (Optional) -->
  <div
    class="flex items-center gap-2 transition-all duration-500 group-hover:scale-105"
  >
    {
      action && (
        <span
          class:list={[
            "hidden sm:inline-block text-xs font-bold uppercase tracking-wider",
            currentVariant.label,
          ]}
        >
          {action}
        </span>
      )
    }
    {
      (url || action) && (
        <div
          class:list={[
            "flex items-center justify-center w-8 h-8 rounded-full transition-colors",
            currentVariant.iconBg,
          ]}
        >
          <ArrowUpRight className={`w-4 h-4 ${currentVariant.label}`} />
        </div>
      )
    }
  </div>
</Element>
