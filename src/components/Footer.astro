---
import PlayIcon from "@/assets/PlayIcon.astro";
import ChatIcon from "@/assets/ChatIcon.astro";
import Notification from "@/components/Notification.astro";
import ModalVideo from "@/components/ModalVideo.astro";
---

<ModalVideo id="last-preech-modal">
  <p slot="header">Última Celebración</p>
  <iframe
    width="100%"
    height="315"
    id="redil-video-player"
    class="rounded-md aspect-video w-full"
    src="https://www.youtube.com/embed/RXzy_5GjV6o?si=OAlWHX_rft33R1Sp"
    title="YouTube video player"
    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
    referrerpolicy="strict-origin-when-cross-origin"
    allowfullscreen></iframe>
</ModalVideo>

<footer class="w-full fixed bottom-5 px-5 lg:px-8">
  <Notification>
    <p class="font-semibold text-xs">
      Domingo 6 de Julio: Única celebración a las 10:00 am
    </p>
  </Notification>
  <section
    class="w-full flex flex-col min-md:flex-row r-well rounded-lg justify-center min-md:justify-between items-center gap-3"
  >
    <article
      id="last-preech-link"
      class="flex flex-col items-center min-md:items-start gap-1"
    >
      <button
        type="button"
        class="link-schema cursor-behavior
             uppercase tracking-wide font-semibold text-xs lg:text-sm text-pretty flex flex-row items-center gap-x-2 animate-pulse duration-300 transition-all"
      >
        <PlayIcon />
        <p>Última celebración</p>
      </button>
      <p class="tracking-wide font-semibold text-xs lg:text-sm">
        Celebraciones Dominicales: 9AM | 11AM
      </p>
    </article>
    <button
      type="button"
      class="hidden min-md:block w-12 link-schema cursor-behavior"
    >
      <ChatIcon />
    </button>
  </section>
</footer>

<script>
  document.addEventListener("astro:page-load", () => {
    const $modal = document.getElementById("last-preech-modal");
    const $lastPreechLink = document.querySelector("#last-preech-link");
    const $lastPreechLinkButton = $lastPreechLink?.querySelector("button");

    if ($modal && $lastPreechLinkButton) {
      $lastPreechLinkButton?.addEventListener("click", () => {
        $modal.dataset.visible = "true";
      });
    }
  });
</script>
